tasks:
    images:
        build:
            services:
                web:
                    image: ${IMAGE_NAME}

    deployment:
        deploy:
            cluster: ${CLUSTER}
            services:
                web:
                    specification:
                        accessibility:
                            from_external: true
                    endpoints:
                        - name: web
                          cloud_flare_zone:
                              zone_identifier: ${CLOUD_FLARE_ZONE}
                              authentication:
                                  email: ${CLOUD_FLARE_EMAIL}
                                  api_key: ${CLOUD_FLARE_API_KEY}
                              record_suffix: -hello-world.continuouspipe.net
                              proxied: true

    integration:
        web_hook:
            url: ${WEBHOOK_URL}